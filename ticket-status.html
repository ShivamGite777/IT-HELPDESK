<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket History - ABC Tech IT Helpdesk</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-custom">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">ABC Tech IT Helpdesk</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="employee-dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="create-ticket.html">New Ticket</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="ticket-status.html">Ticket History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="logoutBtn">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Ticket Status & History</h5>
                <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" id="statusFilter" style="width: auto;">
                        <option value="">All Status</option>
                        <option value="open">Open</option>
                        <option value="in-progress">In Progress</option>
                        <option value="resolved">Resolved</option>
                        <option value="closed">Closed</option>
                    </select>
                    <input type="text" class="form-control form-control-sm" id="searchBox" placeholder="Search tickets..." style="width: 250px;">
                </div>
            </div>
            <div class="card-body">
                <div id="ticketsContainer">
                    <div class="card ticket-card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <h6 class="mb-1">#TKT-1001 - Login issues with company portal</h6>
                                    <small class="text-muted">Created: 2024-01-28 09:30 AM</small>
                                </div>
                                <span class="badge badge-in-progress">In Progress</span>
                            </div>
                            <p class="mb-2">Unable to access the company portal. Getting "Invalid credentials" error even with correct password.</p>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <small class="text-muted">Category:</small><br>
                                    <strong>Access Management</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Priority:</small><br>
                                    <span class="badge badge-high">High</span>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Assigned To:</small><br>
                                    <strong>John Smith</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Last Updated:</small><br>
                                    <strong>1 hour ago</strong>
                                </div>
                            </div>
                            <hr>
                            <div class="mb-2">
                                <strong>Activity Timeline:</strong>
                            </div>
                            <div class="timeline ms-3">
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-28 10:15 AM</small><br>
                                    <span class="badge bg-info">Update</span> Technician John Smith started working on the ticket
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-28 09:45 AM</small><br>
                                    <span class="badge bg-success">Assigned</span> Ticket assigned to IT Technician
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-28 09:30 AM</small><br>
                                    <span class="badge bg-primary">Created</span> Ticket created and auto-classified as High Priority
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card ticket-card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <h6 class="mb-1">#TKT-0998 - Printer not working in Office 3B</h6>
                                    <small class="text-muted">Created: 2024-01-27 02:15 PM</small>
                                </div>
                                <span class="badge badge-open">Open</span>
                            </div>
                            <p class="mb-2">The printer in office 3B is not responding. Shows offline status on all computers.</p>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <small class="text-muted">Category:</small><br>
                                    <strong>Hardware</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Priority:</small><br>
                                    <span class="badge badge-medium">Medium</span>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Assigned To:</small><br>
                                    <strong>Sarah Johnson</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Last Updated:</small><br>
                                    <strong>5 hours ago</strong>
                                </div>
                            </div>
                            <hr>
                            <div class="mb-2">
                                <strong>Activity Timeline:</strong>
                            </div>
                            <div class="timeline ms-3">
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-27 02:30 PM</small><br>
                                    <span class="badge bg-success">Assigned</span> Ticket assigned to Sarah Johnson
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-27 02:15 PM</small><br>
                                    <span class="badge bg-primary">Created</span> Ticket created and auto-classified as Medium Priority
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card ticket-card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <h6 class="mb-1">#TKT-0995 - Need software installation - Adobe Reader</h6>
                                    <small class="text-muted">Created: 2024-01-26 11:00 AM</small>
                                </div>
                                <span class="badge badge-resolved">Resolved</span>
                            </div>
                            <p class="mb-2">Need Adobe Reader installed on my workstation for reviewing PDF documents.</p>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <small class="text-muted">Category:</small><br>
                                    <strong>Software</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Priority:</small><br>
                                    <span class="badge badge-low">Low</span>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Assigned To:</small><br>
                                    <strong>Mike Davis</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Resolved:</small><br>
                                    <strong>2024-01-26 03:30 PM</strong>
                                </div>
                            </div>
                            <hr>
                            <div class="mb-2">
                                <strong>Activity Timeline:</strong>
                            </div>
                            <div class="timeline ms-3">
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-26 03:30 PM</small><br>
                                    <span class="badge bg-success">Resolved</span> Software installed successfully. Resolution time: 4.5 hours
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-26 11:30 AM</small><br>
                                    <span class="badge bg-info">Update</span> Technician started installation process
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-26 11:15 AM</small><br>
                                    <span class="badge bg-success">Assigned</span> Ticket assigned to Mike Davis
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-26 11:00 AM</small><br>
                                    <span class="badge bg-primary">Created</span> Ticket created and auto-classified as Low Priority
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card ticket-card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <h6 class="mb-1">#TKT-0987 - VPN connection dropping frequently</h6>
                                    <small class="text-muted">Created: 2024-01-24 04:00 PM</small>
                                </div>
                                <span class="badge badge-closed">Closed</span>
                            </div>
                            <p class="mb-2">VPN connection keeps disconnecting every 10-15 minutes when working remotely.</p>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <small class="text-muted">Category:</small><br>
                                    <strong>Network & Connectivity</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Priority:</small><br>
                                    <span class="badge badge-critical">Critical</span>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Assigned To:</small><br>
                                    <strong>Sarah Johnson</strong>
                                </div>
                                <div class="col-md-3">
                                    <small class="text-muted">Closed:</small><br>
                                    <strong>2024-01-25 10:00 AM</strong>
                                </div>
                            </div>
                            <hr>
                            <div class="mb-2">
                                <strong>Resolution Notes:</strong>
                            </div>
                            <div class="alert alert-success mb-2">
                                Issue resolved by updating VPN client software and adjusting connection settings. User confirmed stable connection for 24+ hours.
                            </div>
                            <div class="mb-2">
                                <strong>Activity Timeline:</strong>
                            </div>
                            <div class="timeline ms-3">
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-25 10:00 AM</small><br>
                                    <span class="badge bg-secondary">Closed</span> Ticket closed after user confirmation
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-25 08:30 AM</small><br>
                                    <span class="badge bg-success">Resolved</span> Solution implemented and tested
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-24 05:00 PM</small><br>
                                    <span class="badge bg-info">Update</span> Root cause identified - outdated VPN client
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-24 04:15 PM</small><br>
                                    <span class="badge bg-success">Assigned</span> Urgent ticket assigned to Sarah Johnson
                                </div>
                                <div class="mb-2">
                                    <small class="text-muted">2024-01-24 04:00 PM</small><br>
                                    <span class="badge bg-primary">Created</span> Ticket created and auto-classified as Critical Priority
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.clear();
            window.location.href = 'index.html';
        });

        document.getElementById('searchBox').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const tickets = document.querySelectorAll('.ticket-card');

            tickets.forEach(ticket => {
                const text = ticket.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    ticket.style.display = 'block';
                } else {
                    ticket.style.display = 'none';
                }
            });
        });

        document.getElementById('statusFilter').addEventListener('change', function(e) {
            const filterValue = e.target.value.toLowerCase();
            const tickets = document.querySelectorAll('.ticket-card');

            tickets.forEach(ticket => {
                if (filterValue === '') {
                    ticket.style.display = 'block';
                } else {
                    const badge = ticket.querySelector('.badge');
                    const badgeText = badge.textContent.toLowerCase().replace(' ', '-');
                    if (badgeText === filterValue) {
                        ticket.style.display = 'block';
                    } else {
                        ticket.style.display = 'none';
                    }
                }
            });
        });
    </script>
</body>
</html>
